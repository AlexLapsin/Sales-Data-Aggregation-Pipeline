{
  "name": "sales-events-snowflake-sink",
  "config": {
    "_comment": "Snowflake Kafka Connect Sink Connector Configuration",
    "_description": "Streams sales events from Kafka topic 'sales_events' to Snowflake SALES_RAW table",

    "connector.class": "com.snowflake.kafka.connector.SnowflakeSinkConnector",
    "topics": "sales_events",
    "tasks.max": "1",

    "snowflake.url.name": "${SNOWFLAKE_ACCOUNT}",
    "snowflake.user.name": "${SNOWFLAKE_USER}",
    "snowflake.private.key": "${SNOWFLAKE_PRIVATE_KEY}",
    "snowflake.private.key.passphrase": "${SNOWFLAKE_PRIVATE_KEY_PASSPHRASE}",
    "snowflake.database.name": "${SNOWFLAKE_DATABASE}",
    "snowflake.schema.name": "${SNOWFLAKE_SCHEMA}",
    "snowflake.role.name": "${SNOWFLAKE_ROLE}",

    "snowflake.ingestion.method": "SNOWPIPE_STREAMING",
    "snowflake.enable.schematization": "true",
    "snowflake.streaming.enable.single.smt": "false",
    "snowflake.streaming.flush.time.seconds": "10",
    "snowflake.streaming.buffer.count.records": "10000",
    "snowflake.streaming.buffer.flush.time.seconds": "10",
    "snowflake.streaming.buffer.size.bytes": "5000000",

    "buffer.count.records": "10000",
    "buffer.size.bytes": "5000000",
    "buffer.flush.time": "10",

    "key.converter": "org.apache.kafka.connect.storage.StringConverter",
    "value.converter": "org.apache.kafka.connect.json.JsonConverter",
    "value.converter.schemas.enable": "false",

    "snowflake.topic2table.map": "sales_events:SALES_RAW",

    "transforms": "addTimestamp,renameFields",
    "transforms.addTimestamp.type": "org.apache.kafka.connect.transforms.InsertField$Value",
    "transforms.addTimestamp.timestamp.field": "KAFKA_TIMESTAMP",
    "transforms.renameFields.type": "org.apache.kafka.connect.transforms.ReplaceField$Value",
    "transforms.renameFields.renames": "order_id:ORDER_ID,store_id:STORE_ID,product_id:PRODUCT_ID,product_name:PRODUCT_NAME,category:CATEGORY,quantity:QUANTITY,unit_price:UNIT_PRICE,total_price:TOTAL_PRICE,sale_timestamp:SALE_TIMESTAMP,customer_id:CUSTOMER_ID,payment_method:PAYMENT_METHOD,discount:DISCOUNT,store_location:STORE_LOCATION",

    "errors.tolerance": "all",
    "errors.log.enable": "true",
    "errors.log.include.messages": "true",
    "errors.deadletterqueue.topic.name": "sales_events_dlq",
    "errors.deadletterqueue.context.headers.enable": "true",

    "snowflake.metadata.createtime": "INGESTION_TIMESTAMP",
    "snowflake.metadata.topic": "SOURCE_TOPIC",
    "snowflake.metadata.offset": "KAFKA_OFFSET",
    "snowflake.metadata.partition": "KAFKA_PARTITION"
  }
}
